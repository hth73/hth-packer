packer validate ubuntu.json
packer build ubuntu.json
packer build -var 'aws_access_key=key' -var 'aws_secret_key=secret' ubuntu.json
packer build -var-file=variables.json ubuntu.json

# ==> Builds finished. The artifacts of successful builds are:
# --> amazon-ebs: AMIs were created:
# eu-west-1: ami-0dcc18faa5c1e0793

aws ec2 create-key-pair --key-name MyKey --output text > MyKey.pem
aws ec2 run-instances --instance-type t2.micro --count 1 --key-name MyKey --image-id ami-06dab409e0c3dde4b --security-groups tst-hth-sg-ubuntu
aws ec2 describe-instances --instance-ids i-0414ebf35b13a3962

aws ec2 stop-instances --instance-ids i-0414ebf35b13a3962
aws ec2 start-instances --instance-ids i-0414ebf35b13a3962
aws ec2 terminate-instances --instance-ids i-0414ebf35b13a3962

aws ec2 delete-key-pair --key-name MyKey && rm -r MyKey.pem


